# Тест-кейсы
Необходимо проверить:
1. устройство добавляется в интерфейсе севера тремя нажатиями на кнопку;
2. усройство создает такое же количество каналов, сколько фактически присутствует датчиков в устройстве, плюс один main-point(основной) датчик;
3. устройство публикует адекватные данные, проверить что эти данные изменяются при изменении физических условий;
4. устройство публикует новые значения с датчиков (кроме датчика движения) с периодом 30с.
5. устройство быстро активирует флаг на канале датчика движения, что удерживает его некоторое конечное время (30с при текущей установке), а затем самостоятельно сбрасывает, если движение отсутствует. Если спустя 30 секунд движение по-прежнему присутствует, флаг должен оставаться возведенным;
6. перезагрузить модуль z-wave при помощи коммутации пина RST в разъеме программирования на землю; 
    1. проверить, что устройство перезагрузится, отсканирует шину, обнаружит контроллер msw и войдет в рабочий режим; 
    2. проверить что количество каналов остается тем же, что и в момент добавления устройства на сервер; 
    3. проверить что каналы в сервере сохраняют свое прежнее значение до появления нового адекватного значения с датчика;
    4. датчик движения будет удерживать свое прежнее значение;
7. достать физически из устройства какой-либо сенсор;
    1. проверить, что устройство не вернется к сканированию шины, что все каналы (кроме связанного с извлеченным датчиком) будут функционировать;
    2. канал, соответствующий извлеченному датчику, будет сохранять последнее значение;
    3. проверить, что в случае пропажи связи с датчиком движения, значение в его канале станет off (даже если в момент присутствия датчика было on);
8. вставить сенсор назад, проверить что данные в канале только что извлеченного датчика стали вновь обновляться;
9. сымитировать пропажу связи между модулем z-wave и контроллером msw при помощи смены положения переключателя с on на 1 и обратно;
    1. проверить, что модуль msw вернется к состоянию сканирования шины, обнаружит контроллер msw и войдет в рабочий режим;
    2. проверить, что все каналы сохраняют свои прежние значения до получения новых данных;
    3. канал датчика движения в момент потери связи принял значение off.
10. устройство исключается из интерфейса севера тремя нажатиями на кнопку;

ВНИМАНИЕ: нельзя извлекать датчик из устройства и перезагружать питание или переключать коммутатор шины! В этом случае модуль прийдет в некорректное состояние ввиду несоответствия количества зарегистрированных каналов на сервере и обнаруженных датчиков после перезагрузки. Датчики начнут обновляться непредсказуемо, так как события обновления будут приходить не в те каналы, в которые должны. Чтобы вернуть устройство в корректное состояние требуется либо вернуть датчик на место и перезагрузить устройство, либо исключить и добавить устройство на сервер заново.

Для подробного описания процесса добавления и исключение устройств на сервер обратитесь к [инструкции](https://wirenboard.com/wiki/Z-Wave).
