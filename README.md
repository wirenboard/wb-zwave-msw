# Сборка и прошивка проекта для модуля ZWAVE-MSW
## Инструкция по настройке сборки 

Проект для модуля ZUNO выполнен на базе фреймворка Arduino и собственных библиотек Z-Wave. Для ознакомления на сайте ZUNO доступен набор [инструкций](https://z-uno.z-wave.me/getting-started/), в том числе инструкция по [настройке сборки в VS Code](https://z-uno.z-wave.me/vs-code-install/). Текущая версия проекта рассчитана на zuno-компоненты версии **Z-Uno2(Beta)(3.0.9)**. 
:warning:**Версия SDK***:иногда при обновлении SDK из его старых версий могут уехать нужные библиотеки. Поэтому, если вы вдруг установили 3.0.9, но нужных библиотек нет, проверьте, не была ли выпущена новая версия.

После установки расширения Z-Uno, в статус-баре VSCode появится доступ к дополнительным настройкам и функциям, в которых нужно установить следующие параметры:
1. режим шифрования **S2**
2. частота **RU**
3. мощность радиосигнала **+2.0dBm**
4. опции комплятора: **-Wall;-Werror**

Также в статус-баре можно выбрать тип платы (должен быть Z-Uno2(Beta)) и последовательный порт.

![Доступные настройки](docs/vscode_settings.png)

## Инструкция по прошивке
Прошивка осуществляется через интерфейс UART. 

![Распиновка разъема](docs/uart_pinout.png)

Левый нижний вывод, обозначенный на схеме как N$4, является входом сигнала RST. Если переходник USB-UART, который вы используете, имеет выход DTS, вам необходимо подключить его на вход RST. Если такой выход у вас отсутствует, то необходимо при каждой операции (в том числе прошивке) коммутировать сигнал RST вручную на GND.
Для того, чтобы собрать и прошить проект, нужно открыть основной файл *.ino и в верней панели нажать кнопку "Загрузить".

## Инструкция по отладке
Плата модуля имеет отладочный UART интерфейс, по выходу TX которого отправляется вся отладочная информация.

![Расположение отладочного TX](docs/debug_tx.png)

Для контроля обмена Modbus-пакетами между MSW и модулем ZUNO есть возможность подпаяться к UART-выходу трансивера шины RS485.

![Расположение UART-выхода трансивера](docs/transceiver_uart.png)
